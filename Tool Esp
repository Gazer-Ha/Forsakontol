local ws = game:GetService("Workspace")

local function addLabel(tool)
    if string.lower(tool.Name):find("flag") or not tool:FindFirstChild("Handle") then return end

    local bb = Instance.new("BillboardGui")
    bb.Name = "ToolLabel"
    bb.Size = UDim2.new(4, 0, 1, 0)
    bb.StudsOffset = Vector3.new(0, 2, 0)
    bb.AlwaysOnTop = true

    local lbl = Instance.new("TextLabel")
    lbl.Size = UDim2.new(1, 0, 1, 0)
    lbl.BackgroundTransparency = 1
    lbl.TextScaled = true
    lbl.Font = Enum.Font.SourceSansBold
    lbl.TextColor3 = Color3.new(1, 1, 1)
    lbl.TextStrokeTransparency = 0
    lbl.Text = tool.Name
    lbl.Parent = bb

    bb.Parent = tool.Handle
end

for _, tool in ipairs(ws:GetDescendants()) do
    if tool:IsA("Tool") then addLabel(tool) end
end

ws.DescendantAdded:Connect(function(tool)
    if tool:IsA("Tool") then task.wait(0.1) addLabel(tool) end
end)

ws.DescendantRemoving:Connect(function(tool)
    if tool:IsA("Tool") and tool:FindFirstChild("Handle") then
        local lbl = tool.Handle:FindFirstChild("ToolLabel")
        if lbl then lbl:Destroy() end
    end
end)
